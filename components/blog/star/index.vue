<!-- eslint-disable @stylistic/max-len -->
<!-- eslint-disable max-len -->
<template>
  <div class="star-container">
    <div class="max-effect-box">
      <img
        src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjEiIHZpZXdCb3g9IjAgMCAyMiAyMSIgZmlsbD0ibm9u%0D%0AZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTMuNTI5NDIg%0D%0AMThMMTguMzUyOSAzLjE3NjQ1TTMuNTI5NDIgMy4xNzY0NUwxMC45NDEyIDEwLjU4ODJMMTguMzUy%0D%0AOSAxOCIgc3Ryb2tlPSIjRkZFQjMzIiBzdHJva2Utd2lkdGg9IjYiIHN0cm9rZS1saW5lY2FwPSJy%0D%0Ab3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8L3N2Zz4K"
        class="max-effect"
        style="width: 10px;height: 10px;transform: translate(4.6115px, 19.9746px) rotate(143deg);"
      >
      <img
        src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjEiIHZpZXdCb3g9IjAgMCAyMiAyMSIgZmlsbD0ibm9u%0D%0AZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTMuNTQzOTcg%0D%0AMTcuNDExMUMzLjE4NjY4IDE1LjQ0NzkgMy4zMzIwOSAxMy40MjYxIDMuOTY2NjYgMTEuNTM0MkM0%0D%0ALjYwMTIyIDkuNjQyMzEgNS43MDQzIDcuOTQxNzkgNy4xNzMxNCA2LjU5MTA1QzguNjQxOTggNS4y%0D%0ANDAzMSAxMC40Mjg4IDQuMjgzMyAxMi4zNjcxIDMuODA5MTdDMTQuMzA1NSAzLjMzNTAzIDE2LjMz%0D%0AMjMgMy4zNTkyIDE4LjI1ODggMy44Nzk0MiIgc3Ryb2tlPSIjMzJGRjk4IiBzdHJva2Utd2lkdGg9%0D%0AIjYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8L3N2%0D%0AZz4K"
        class="max-effect"
        style="width: 8px; height: 7px; transform: translate(-0.750339px, 21.4869px) rotate(172deg);"
      >
      <img
        src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9u%0D%0AZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iOCIgY3k9%0D%0AIjgiIHI9IjgiIGZpbGw9IiNGRjQwMkUiLz4KPC9zdmc+Cg=="
        class="max-effect"
        style="width: 8px; height: 8px; transform: translate(-63.9757px, 25.8479px) rotate(0deg);"
      >
      <img
        src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjIiIGhlaWdodD0iMjEiIHZpZXdCb3g9IjAgMCAyMiAyMSIgZmlsbD0ibm9u%0D%0AZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTMuNTQzOTcg%0D%0AMTcuNDExMUMzLjE4NjY4IDE1LjQ0NzkgMy4zMzIwOSAxMy40MjYxIDMuOTY2NjYgMTEuNTM0MkM0%0D%0ALjYwMTIyIDkuNjQyMzEgNS43MDQzIDcuOTQxNzkgNy4xNzMxNCA2LjU5MTA1QzguNjQxOTggNS4y%0D%0ANDAzMSAxMC40Mjg4IDQuMjgzMyAxMi4zNjcxIDMuODA5MTdDMTQuMzA1NSAzLjMzNTAzIDE2LjMz%0D%0AMjMgMy4zNTkyIDE4LjI1ODggMy44Nzk0MiIgc3Ryb2tlPSIjMzJGRjk4IiBzdHJva2Utd2lkdGg9%0D%0AIjYiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8L3N2%0D%0AZz4K"
        class="max-effect"
        style="width: 8px; height: 7px; transform: translate(-45.6039px, 11.3703px) rotate(133deg);"
      >
      <img
        src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxMiAxOCIgZmlsbD0ibm9u%0D%0AZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjEyIiBo%0D%0AZWlnaHQ9IjE4IiBmaWxsPSIjNUE3RkZGIi8+Cjwvc3ZnPgo="
        class="max-effect"
        style="width: 6px; height: 9px; transform: translate(-39.8689px, -16.1081px) rotate(134deg);"
      >
      <img
        src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCA1MSAxOCIgZmlsbD0ibm9u%0D%0AZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTQ3LjQ3MDYg%0D%0AM0wzOC41NzY1IDE0LjExNzZMMjkuNjgyMyAzTDIwLjc4ODIgMTQuMTE3NkwxMS44OTQxIDIuOTk5%0D%0AOTlMMi45OTk5OSAxNC4xMTc2IiBzdHJva2U9IiM5RTNFRkYiIHN0cm9rZS13aWR0aD0iNiIgc3Ry%0D%0Ab2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjwvc3ZnPgo="
        class="max-effect"
        style="width: 25.5px; height: 9px; transform: translate(-20.2857px, -43.5028px) rotate(101deg);"
      >
      <img
        src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9u%0D%0AZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iOCIgY3k9%0D%0AIjgiIHI9IjgiIGZpbGw9IiNGRjQwMkUiLz4KPC9zdmc+Cg=="
        class="max-effect"
        style="width: 8px; height: 8px; transform: translate(32.498px, -43.1263px) rotate(77deg);"
      >
      <img
        src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCA1MSAxOCIgZmlsbD0ibm9u%0D%0AZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTQ3LjQ3MDYg%0D%0AM0wzOC41NzY1IDE0LjExNzZMMjkuNjgyMyAzTDIwLjc4ODIgMTQuMTE3NkwxMS44OTQxIDIuOTk5%0D%0AOTlMMi45OTk5OSAxNC4xMTc2IiBzdHJva2U9IiM5RTNFRkYiIHN0cm9rZS13aWR0aD0iNiIgc3Ry%0D%0Ab2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjwvc3ZnPgo="
        class="max-effect"
        style="width: 25.5px; height: 9px; transform: translate(29.1437px, -17.5113px) rotate(173deg);"
      >
    </div>

    <button
      class="star-button"
      style="transform: scale(1); transition: transform 250ms ease 0s;"
    >
      <svg
        width="48"
        height="40.32"
        viewBox="0 0 50 42"
        fill="none"
        style="transform: rotate(0deg);"
      >
        <defs>
          <linearGradient
            id="active-gradient-zxvf"
            x1="25"
            y1="42"
            x2="26.3796"
            y2="0.0453673"
            gradientUnits="userSpaceOnUse"
          >
            <stop stop-color="hsl(353deg, 100%, 52%)" />
            <stop offset="1" stop-color="hsl(313deg, 100%, 52%)" />
          </linearGradient>
          <linearGradient
            id="inactive-gradient-zxvf"
            x1="15"
            y1="41"
            x2="42"
            y2="-1.5"
            gradientUnits="userSpaceOnUse"
          >
            <stop stop-color="#666" stop-opacity="0.4" />
            <stop offset="1" stop-color="#AAA" stop-opacity="0.4" />
          </linearGradient>
        </defs>
        <mask
          id="like-button-mask-zxvf"
          mask-type="alpha"
          maskUnits="userSpaceOnUse"
          x="0"
          y="0"
          width="50"
          height="42"
        >
          <path
            d="M13.2537 0.0255029C23.4033 0.0255029 25.0273 10.5191 25.0273 10.5191C25.0273 10.5191 26.6512 -0.60088 37.6129 0.0255029C44.3441 0.410148 48.7484 6.32169 48.9804 12.1981C49.7924 32.7656 28.7678 41.5 25.0273 41.5C21.2868 41.5 -0.549833 32.3459 1.07416 12.1981C1.54782 6.32169 6.29929 0.0255029 13.2537 0.0255029Z"
            fill="#000000"
          />
        </mask>
        <mask
          id="active-gradient-mask-zxvf"
          mask-type="alpha"
          maskUnits="userSpaceOnUse"
          x="0"
          y="0"
          width="50"
          height="42"
        >
          <!-- star percent -->
          <polygon
            points="
              0,42
              50,42
              50,-0.011698533618279328
              0,-0.011698533618279328
            "
            fill="#000000"
          />
        </mask>
        <g mask="url(#like-button-mask-zxvf)">
          <path
            d="M13.2537 0.0255029C23.4033 0.0255029 25.0273 10.5191 25.0273 10.5191C25.0273 10.5191 26.6512 -0.60088 37.6129 0.0255029C44.3441 0.410148 48.7484 6.32169 48.9804 12.1981C49.7924 32.7656 28.7678 41.5 25.0273 41.5C21.2868 41.5 -0.549833 32.3459 1.07416 12.1981C1.54782 6.32169 6.29929 0.0255029 13.2537 0.0255029Z"
            fill="url(#inactive-gradient-zxvf)"
          />
          <g mask="url(#active-gradient-mask-zxvf)">
            <path
              d="M13.2537 0.0255029C23.4033 0.0255029 25.0273 10.5191 25.0273 10.5191C25.0273 10.5191 26.6512 -0.60088 37.6129 0.0255029C44.3441 0.410148 48.7484 6.32169 48.9804 12.1981C49.7924 32.7656 28.7678 41.5 25.0273 41.5C21.2868 41.5 -0.549833 32.3459 1.07416 12.1981C1.54782 6.32169 6.29929 0.0255029 13.2537 0.0255029Z"
              fill="url(#active-gradient-zxvf)"
            />
          </g>
          <!-- 非max的眼睛, max->0 -->
          <g style="opacity: 0; transform: translate(0px, 0px);">
            <circle
              cx="15"
              cy="22"
              r="2"
              fill="#000000"
              fill-opacity="0.4"
            />
            <circle
              cx="35"
              cy="22"
              r="2"
              fill="#000000"
              fill-opacity="0.4"
            />
          </g>
          <!-- max的眼睛, max->1 -->
          <g style="opacity: 1;">
            <path
              d="M 13 23 Q 15 19, 17 23 "
              stroke="#000000"
              stroke-opacity="0.4"
              fill="none"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
            />
            <path
              d="M 33 23 Q 35 19, 37 23 "
              stroke="#000000"
              stroke-opacity="0.4"
              fill="none"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
            />
          </g>
          <g>
            <mask
              id="tongue-mask"
              mask-type="alpha"
              maskUnits="userSpaceOnUse"
              x="20"
              y="27"
              width="11"
              height="6"
            >
              <path
                d="M28.3333 27H21.6666C21.6666 27 20.0001 27 20 29C19.9999 31 22.3875 33 25 33C27.6125 33 30 31 30 29C30 27 28.3333 27 28.3333 27Z"
                fill="#000000"
                fill-opacity="0.4"
              />
            </mask>
            <!-- max 嘴巴, max->1 -->
            <g mask="url(#tongue-mask)" style="opacity: 1;">
              <path
                d="M28.3333 27H21.6666C21.6666 27 20.0001 27 20 29C19.9999 31 22.3875 33 25 33C27.6125 33 30 31 30 29C30 27 28.3333 27 28.3333 27Z"
                fill="#000000"
                fill-opacity="1"
              />
              <circle
                cx="25"
                cy="35"
                r="5"
                fill="#DB2C49"
                fill-opacity="0.5"
              />
            </g>
            <!-- 非max 嘴巴, max->0 -->
            <!-- 25.2是非max哭脸, 33.6是非max笑脸, 需要执行过渡动画 -->
            <path
              d="
                M 20 30
                Q 25 33.6 30 30
              "
              stroke="#000000"
              stroke-opacity="0.4"
              stroke-linecap="round"
              style="opacity: 0;"
            />
          </g>
          <!-- 忽略 -->
          <g>
            <path
              d="M53.5 18.5L47 5C47 5 53.5 31.9722 24.5 36C-4.5 40.0278 1 1.5 1 1.5L-6.5 25L8.00002 44.5L15.5 52L39 49L53.5 18.5Z"
              fill="black"
              fill-opacity="0.1"
            />
            <path
              d="M6.14471 8.44525C6.64924 7.12038 7.41962 5.99208 8.36394 5.15003C9.30652 4.30953 10.3901 3.78182 11.5089 3.58622"
              stroke="white"
              stroke-opacity="0.45"
              stroke-width="3"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <path
              d="M31.7084 5.95975C32.7822 4.70067 34.1021 3.81419 35.484 3.37609"
              stroke="white"
              stroke-opacity="0.45"
              stroke-width="3"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </g>
        </g>
      </svg>
    </button>

    <div class="count-box">
      <span class="count-wrapper">{{ count }}
        <div class="count-change">
          <div class="count-change-text" style="transform: translateY(-12px); opacity: 0;">MAX</div>
        </div>
      </span>
    </div>
  </div>
</template>

<script setup lang="ts">
// https://www.joshwcomeau.com/animation/pride-flags
const count = ref(13285);
const countFromUser = ref(0);
</script>

<style lang="css">
.star-container {
  position: relative;
  display: flex;
  align-items: center;
  width: 200px;

  * {
    margin: 0px;
    line-height: calc(1em + 0.725rem);
    -webkit-font-smoothing: antialiased;
  }
}

.max-effect-box {
  width: 48px;
  height: 48px;
  position: absolute;
}

.max-effect {
  position: absolute;
  inset: 0px;
  margin: auto;
  transform-origin: center center;
  animation: 750ms ease 200ms 1 normal both running me-key;
}

@keyframes me-key {
  0% {
    opacity: 0;
  }
  100% {
    opacity: 1;
  }
}

/** star-button */
.star-button {
  display: block;
  margin: 0px;
  padding: 0px;
  border: none;
  background: transparent;
  cursor: pointer;
  text-align: left;
  font: inherit;
}

/** counts */
.count-box {
  padding-left: 22px;
  font-size: 1rem;
  min-width: 75px;
  font-weight: 700;
  color: rgb(255, 10, 120);
}

.count-wrapper {
  position: relative;
  display: inline-block;
}

.count-change {
  position: absolute;
  top: 0px;
  right: 0px;
  transform: translateX(calc(100% + 4px));
  pointer-events: none;
}

.count-change-text {
  font-size: 11px;
  color: hsl(225deg, 7%, 60%);
}
</style>
